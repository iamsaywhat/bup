void delay_us (uint32_t us)
{
   volatile uint32_t delay = (us * (SystemCoreClock / 1000000) / 8);
   while (delay--);   
}